<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<manialink version="3">
	<frame pos="160 -88" id="tooltip" hidden="1">
		<quad pos="0 0" z-index="0" size="280 6" bgcolor="222A" valign="bottom" halign="right"/>
		<label pos="-270 3" z-index="1" size="260 6" text="Play Nadeo maps with any car of your wish. Combinations are endless." valign="center2" style="TextTitle3" textsize="1"/>
	</frame>
	<frame id="menu" hidden="1">
		<quad pos="55 20" z-index="1" size="8 8" bgcolor="FFFA" halign="center" valign="center" style="UIConstruction_Buttons" substyle="Help" scriptevents="1" id="help"/>
		<quad pos="0 5" z-index="0" size="120 120" halign="center" valign="center" scriptevents="1" id="block" hidden="1"/>
		<quad pos="0 45" z-index="0" size="120 40" image="file://Media/Images/NadeoEnvimix2.png" halign="center" valign="center" manialink="nadeoenvimix" id="logo"/>
		<frame pos="0 -52" id="footer" scale="1">
			<quad z-index="0" size="110 6" bgcolor="0008" valign="center" halign="center" pos="0 -3"/>
			<label z-index="1" size="110 6" text="Made by $iBigBang1112 & Poutrel" valign="center2" textsize="1" halign="center" style="TextButtonBig" pos="0 -3" manialink="nadeoenvimix?about"/>
		</frame>
		
		<label pos="-58 -40" z-index="1" size="20 5" text="FEEDBACK" valign="center2" textsize=".5" style="TextCardMedium" halign="right" textemboss="1" url="maniaplanet://#mailto=bigbang1112"/>
		<label pos="-58 -45" z-index="1" size="20 5" text="PRIVACY POLICY" valign="center2" textsize=".5" style="TextCardMedium" manialink="nadeoenvimix?privacy" halign="right" textemboss="1"/>
		
		<quad pos="0 -15" z-index="-1" size="110 70" bgcolor="0008" halign="center" valign="center"/>		
		<frame id="buttons">
			<frame pos="0 5" id="buttonPlay">
				<quad pos="0 0" z-index="0" size="100 20" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="100 20" text="Play" halign="center" valign="center2" style="TextTitle3" textsize="8 " id="text"/>
			</frame>
			<frame pos="-26 -12" id="buttonStatistics">
				<quad pos="0 0" z-index="0" size="48 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="48 10" text="Statistics" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="-26 -24" id="buttonProfile">
				<quad pos="0 0" z-index="0" size="48 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="48 10" text="Profile" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="-26 -40" id="buttonExit">
				<quad pos="0 0" z-index="0" size="48 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="48 10" text="Exit" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="25 -26" id="buttonTrack">
				<quad z-index="0" size="50 38" bgcolor="000F" scriptevents="1" opacity=".9" id="button" halign="center" valign="center" pos="0 0"/>
				<label pos="0 14" z-index="1" size="50 10" text="Track of the Day" style="TextTitle3" halign="center" valign="center2" textsize="1" id="text"/>
				<frame z-index="1" scale="1.05" id="track">
					<quad pos="0 9" size="50 25" halign="center" image="file://Media/Thumbnails/Loading.jpg" id="thumbnail"/>
					<label pos="-22 -14" z-index="1" size="45 5" text="LOADING..." valign="bottom" style="TextTitle3" textsize="2" id="name"/>
				</frame>
			</frame>
		</frame>
	</frame>
	<frame id="selection" z-index="1" hidden="0">
		<quad pos="-160 89.8" z-index="-1" size="320 180" scriptevents="1"/>
		<quad pos="-140 70" z-index="0" size="3 140" bgcolor="444A"/>
		<quad pos="88 70" z-index="0" size="49 12.5" bgcolor="444A"/>
		<quad pos="88 57.5" z-index="0" size="49 127.5" bgcolor="000A"/>
		<quad pos="-137 57.5" z-index="0" size="217 127.5" bgcolor="000A"/>
		<quad pos="-137 70" z-index="0" size="217 12.5" bgcolor="444A"/>
		<quad pos="80 70" z-index="0" size="3 140" bgcolor="444A"/>
		<quad pos="83 60" z-index="0" size="2 30" bgcolor="000A"/>
		<quad pos="85 70" z-index="0" size="3 140" bgcolor="444A"/>
		<quad pos="137 70" z-index="0" size="3 140" bgcolor="444A"/>
		
		<quad pos="140 70" z-index="1" size="10 10" bgcolor="FFFA" id="help" halign="center" valign="center" style="UIConstruction_Buttons" substyle="Help" scriptevents="1"/>
		
		<label pos="-130 64" z-index="1" size="40 10" text="Canyon" style="TextTitle3" textsize="3" valign="center" scale="1.25" id="labelEnvironment"/>
		
		<frame pos="112.5 66" z-index="1">
			<label pos="0 0" z-index="0" size="45 5" text="Menu" style="TextTitle3" halign="center" textsize="4"/>
		</frame>
		
		<quad pos="-135 55" z-index="1" size="200 2" bgcolor="FFFF" opacity=".75" id="difficultyBar"/>
		
		<frame pos="-135 50" id="maps" z-index="1">
			<frame pos="20 -10" id="01">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A01" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="60 -10" id="02">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A02" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="100 -10" id="03">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A03" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="140 -10" id="04">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A04" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="180 -10" id="05">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A05" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
				
			<frame pos="20 -30" id="06">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A06" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="60 -30" id="07">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A07" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="100 -30" id="08">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A08" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="140 -30" id="09">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A09" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="180 -30" id="10">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A10" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
				
			<frame pos="20 -50" id="11">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A11" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="60 -50" id="12">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A12" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="100 -50" id="13">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A13" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="140 -50" id="14">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A14" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
			<frame pos="180 -50" id="15">
				<quad z-index="0" size="40 20" image="file://Media/Thumbnails/NoThumbnail.jpg" opacity=".9" halign="center" valign="center"/>
				<quad z-index="1" size="40 20" bgcolor="FFFF" halign="center" valign="center" opacity=".25" id="hover" scriptevents="1"/>
				<quad z-index="2" size="40 20" bgcolor="FFFA" style="Bgs1" substyle="BgColorContour" id="select" hidden="1" halign="center" valign="center"/>
				<label pos="15 -7.5" z-index="3" size="20 10" text="A15" valign="bottom" style="TextTitle3" halign="right" textsize="4" id="name"/>
			</frame>
		</frame>
		
		<quad z-index="0" size="200 50" bgcolor="000A" pos="-135 -15"/>
		<quad pos="-20 -20" z-index="1" size="80 40" bgcolor="000A"/>
		<frame pos="-135 -15" z-index="1" id="Panel" hidden="0">
			<quad z-index="0" size="10 10" bgcolor="FFFA" halign="center" valign="center" id="Lock" style="Icons64x64_1" substyle="StatePrivate" pos="30 -8.5" scriptevents="1" hidden="1"/>
			<label pos="5 -5" z-index="0" size="20 10" text="..." textsize="8" style="TextTitle3" id="Name"/>
			<label pos="5 -15" z-index="0" size="30 5" text="Validated by" textsize="1.5" style="TextTitle3"/>
			<label pos="32.5 -15" z-index="0" size="40 5" text="..." textsize="1.5" style="TextTitle3" id="Validator"/>
			
			<frame pos="5 -23" id="TableTrackRating">
				<label pos="0 0" z-index="0" size="25 5" text="CanyonCar" textsize="2" valign="center"/>
				<label pos="0 -5" z-index="0" size="25 5" text="StadiumCar" textsize="2" valign="center"/>
				<label pos="0 -10" z-index="0" size="25 5" text="ValleyCar" textsize="2" valign="center"/>
				<label pos="0 -15" z-index="0" size="25 5" text="LagoonCar" textsize="2" valign="center"/>
				
				<label pos="0 -20" z-index="0" size="25 5" text="CAR" style="TextTitle3" textsize="1"/>
				<label pos="25 -20" z-index="0" size="25 5" text="DIFFICULTY" style="TextTitle3" textsize="1"/>
				<label pos="65 -20" z-index="0" size="25 5" text="QUALITY" style="TextTitle3" textsize="1"/>
				
				<gauge pos="23 0" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyCanyonCar"/>
				<gauge pos="23 -5" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyStadiumCar"/>
				<gauge pos="23 -10" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyValleyCar"/>
				<gauge pos="23 -15" z-index="0" size="40 10" valign="center" drawbg="0" id="DifficultyLagoonCar"/>
				
				<gauge pos="63 0" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityCanyonCar"/>
				<gauge pos="63 -5" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityStadiumCar"/>
				<gauge pos="63 -10" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityValleyCar"/>
				<gauge pos="63 -15" z-index="0" size="40 10" valign="center" drawbg="0" id="QualityLagoonCar"/>
			</frame>
			
		</frame>
		
		<quad pos="80 50" z-index="1" size="1 22" bgcolor="FFFC" halign="right"/>
		<quad pos="80 28" z-index="1" size="1 22" bgcolor="0F0C" halign="right"/>
		<quad pos="80 6" z-index="1" size="1 22" bgcolor="00FC" halign="right"/>
		<quad pos="80 -16" z-index="1" size="1 22" bgcolor="F00C" halign="right"/>
		<quad pos="80 -38" z-index="1" size="1 22" bgcolor="000C" halign="right"/>
		
		<frame pos="72.5 50" z-index="1" id="slider">
			<quad pos="0 5" z-index="0" size="10 120" bgcolor="000A" halign="center" scriptevents="1" id="QuadBack"/>
			<quad z-index="1" size="8 22" bgcolor="AAAA" halign="center" id="button" scriptevents="1" pos="0 0"/>
		</frame>
		
		<frame id="buttonsSelection" z-index="1">
			<frame pos="-40 -25" id="buttonPlay">
				<quad pos="0 0" z-index="0" size="30 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="30 10" text="Play" halign="center" valign="center2" style="TextTitle3" id="text"/>
			</frame>
		
			<frame pos="15 63.5" id="buttonMostInteresting">
				<quad pos="0 0" z-index="0" size="40 8" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="40 8" text="Most Interesting" halign="center" valign="center2" style="TextTitle3" textsize="1" id="text"/>
			</frame>
			<frame pos="60 63.5" id="buttonMostDifficult">
				<quad pos="0 0" z-index="0" size="40 8" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="40 8" text="Most Difficult" halign="center" valign="center2" style="TextTitle3" textsize="1" id="text"/>
			</frame>
		
			<frame pos="112.5 50" id="buttonCanyon">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/CanyonButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Canyon" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
			<frame pos="112.5 39" id="buttonStadium">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/StadiumButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Stadium" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
				
				<frame z-index="3" id="FrameOpenplanet">
					<quad z-index="0" size="49 10" bgcolor="101" halign="center" valign="center" opacity=".9" url="https://openplanet.nl/"/>
					<label size="10 10" text="$f0fïˆž" halign="center" valign="center2" textsize="5" z-index="1"/>
				</frame>
			</frame>
			<frame pos="112.5 28" id="buttonValley">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/ValleyButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Valley" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
			<frame pos="112.5 17" id="buttonLagoon">
				<quad z-index="0" size="49 10" bgcolor="000" halign="center" valign="center" id="button" scriptevents="1"/>
				<quad z-index="1" size="40 8" bgcolor="000" halign="center" valign="center" image="file://Media/LagoonButton.jpg" opacity=".75"/>
				<label pos="0 0" z-index="2" size="49 10" text="Lagoon" halign="center" valign="center2" style="TextTitle3" textsize="2" textemboss="1"/>
			</frame>
		
			<frame pos="112.5 0" z-index="1" id="buttonPlayOnline">
				<quad pos="0 0" size="49 20" bgcolor="000" scriptevents="1" opacity=".9" id="button" halign="center" valign="center"/>
				<label pos="0 0" z-index="1" size="49 20" text="Play Online" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		
			<frame pos="112.5 -17" z-index="1" id="buttonPlayLocally">
				<quad pos="0 0" size="49 10" bgcolor="111" halign="center" valign="center" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="49 10" text="Play Locally" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			
			<frame pos="112.5 -35" z-index="1" id="buttonCustomCars">
				<quad pos="0 0" size="49 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="49 10" text="Custom Cars" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		
			<frame pos="112.5 -60" z-index="1" id="buttonBack">
				<quad pos="0 0" size="49 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="49 10" text="Back" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		</frame>
	</frame>
	<frame id="FrameCustomCars" z-index="2" hidden="1">
		<quad z-index="0" size="200 100" bgcolor="000A" halign="center" valign="center"/>
		
		<frame pos="-95 35" z-index="1" id="FrameList">
			<quad pos="0 0" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 0" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar1"/>
			<quad pos="0 -10" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -10" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar2"/>
			<quad pos="0 -20" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -20" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar3"/>
			<quad pos="0 -30" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -30" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar4"/>
			<quad pos="0 -40" z-index="0" size="135 8" valign="center" style="BgsPlayerCard" substyle="BgCard" scriptevents="1"/>
			<entry pos="5 -40" z-index="1" size="125 5" default="" valign="center2" textsize="2" id="EntryCar5"/>
		</frame>
		
		<label pos="-95 -24" z-index="1" size="135 20" text="Because of Maniaplanet limitations, we have to follow some rules. Use CREATE button to setup and manage cars you wanna use. Once you do that, you have 5 slots to put your cars into. Type the exact full car name with extension, like $oLowGravity.Item.Gbx$z. Remember that if you misspell the car name, the whole gamemode will crash immediately." textsize="2" autonewline="1"/>
		
		<frame id="buttonsCustomCars" z-index="1">
			<frame pos="70 -28" id="buttonCreate">
				<quad pos="0 0" z-index="0" size="50 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="50 10" text="Create" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
			<frame pos="70 -40" id="buttonBack">
				<quad pos="0 0" z-index="0" size="50 10" bgcolor="000" halign="center" valign="center" scriptevents="1" opacity=".9" id="button"/>
				<label pos="0 0" z-index="1" size="50 10" text="Back" halign="center" valign="center2" style="TextTitle3" textsize="2" id="text"/>
			</frame>
		</frame>
	</frame>
	<script>
	<!--
		#Include "TextLib" as TextLib
		#Include "MathLib" as MathLib
		#Include "AnimLib" as AnimLib
		
		declare Integer StartTime;
		declare CAudioSource SoundHover;
		declare CAudioSource SoundClick;
		declare CAudioSource SoundElectric;
		
		declare CHttpRequest TrackOfTheDayRequest;
		declare CHttpRequest MapBriefListRequest;
		
		declare CXmlDocument MapBriefDocument;
		
		Boolean IsMenuShown() {
			return (Page.GetFirstChild("footer").RelativeScale == 1.0);
		}
		
		Void ShowMenu(Integer _StartTime) {
			Page.GetFirstChild("menu").Show();
		
			Page.GetFirstChild("logo").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime, 0.0, 1.0, 1000);
			Page.GetFirstChild("menu").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 100, 0.0, 1.0, 1000);
			Page.GetFirstChild("footer").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 200, 0.0, 1.0, 1000);
			
			Page.GetFirstChild("buttonPlay").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 300, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonStatistics").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 400, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonProfile").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 500, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonExit").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 600, 0.0, 1.0, 500);
			Page.GetFirstChild("buttonTrack").RelativeScale = AnimLib::EaseOutCubic(Now - _StartTime - 400, 0.0, 1.0, 500);
			
			((Page.GetFirstChild("menu") as CMlFrame).GetFirstChild("help") as CMlQuad).Opacity = AnimLib::EaseOutCubic(Now - _StartTime - 1200, 0.0, 1.0, 500);
		}
		
		Integer HideMenu(Integer _StartTime, Text _Action) {
			declare Time = Now - _StartTime;
			
			if(Time > 0 && Time < 100)
				Page.GetFirstChild("menu").Hide();
			else if(Time > 150 && Time < 250)
				Page.GetFirstChild("menu").Hide();
			else if(Time > 300 && Time < 350)
				Page.GetFirstChild("menu").Hide();
			else if(Time > 400)
				Page.GetFirstChild("menu").Hide();
			else
				Page.GetFirstChild("menu").Show();
				
			if(Time > 400 && _Action != "") SendCustomEvent("COMMAND_EXIT", Text[]);
				
			return Time;
		}
		
		Real GetSliderValue() {
			return (Page.GetFirstChild("slider") as CMlFrame).GetFirstChild("button").RelativePosition_V3.Y / -88.0;
		}
		
		Integer GetDifficulty() {
			return MathLib::NearestInteger(GetSliderValue() * 4.0);
		}
		
		declare Text Environment;
		declare Text[] Maps;
		declare Integer LastDifficulty;
		declare Integer DifficultySwitchTime;
		
		declare Text SelectEnvironment;
		declare Integer SelectDifficulty;
		declare Integer SelectMap;
		
		Void AnimateMaps(Integer _StartTime) {
			declare Time = _StartTime;
			
			for(i,1,15) {
				declare Map = ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("maps") as CMlFrame).Controls[i - 1];
				
				Map.RelativeScale = 0.75 + AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 500) * .25;
				
				if(GetDifficulty() == 4 && i > 5) {
					Map.Hide();
				}
				else {
					Map.Show();
				
					foreach(Control,(Map as CMlFrame).Controls) {
						if(Control is CMlQuad && Control.ControlId != "hover")
							(Control as CMlQuad).Opacity = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 500);
						else if(Control is CMlLabel) {
							(Control as CMlLabel).Opacity = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 500);
							(Control as CMlLabel).SetText(Maps[i]);
						}
					}
					Time+=20;
				}
			}
		}
		
		declare Text TrackDayEnvironment;
		declare Text TrackDayDifficulty;
		declare Text TrackDayMap;
		
		Void HandleRequests() {
			if(TrackOfTheDayRequest != Null) {
				if(TrackOfTheDayRequest.IsCompleted) {
					if(TrackOfTheDayRequest.StatusCode == 200) {
						declare Doc = Xml.Create(TrackOfTheDayRequest.Result);
						declare NodeEnvironment = Doc.Root.GetFirstChild("Environment");
						declare NodeDifficulty = Doc.Root.GetFirstChild("Difficulty");
						declare NodeMap = Doc.Root.GetFirstChild("Map");
						
						switch(NodeDifficulty.TextContents) {
							case "A": TrackDayDifficulty = "0";
							case "B": TrackDayDifficulty = "1";
							case "C": TrackDayDifficulty = "2";
							case "D": TrackDayDifficulty = "3";
							case "E": TrackDayDifficulty = "4";
						}
						
						TrackDayEnvironment = NodeEnvironment.TextContents;
						TrackDayMap = NodeMap.TextContents;
						
						declare Map = "";
						if(TextLib::ToInteger(TrackDayMap) < 10) Map = "0"^TrackDayMap;
						else Map = TrackDayMap;
						
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).SetText(NodeEnvironment.TextContents ^ " " ^ NodeDifficulty.TextContents ^ Map);
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("thumbnail") as CMlQuad).ChangeImageUrl("file://Media/Thumbnails/NoThumbnail.jpg");
						
						Xml.Destroy(Doc);
					}
					else {
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).SetText("Not found");
						(((Page.GetFirstChild("buttonTrack") as CMlFrame).GetFirstChild("track") as CMlFrame).GetFirstChild("thumbnail") as CMlQuad).ChangeImageUrl("file://Media/Thumbnails/Unknown.jpg");
					}
					
					Http.Destroy(TrackOfTheDayRequest);
					TrackOfTheDayRequest = Null;
				}
			}
			if(MapBriefListRequest != Null) {
				if(MapBriefListRequest.IsCompleted) {
					if(MapBriefListRequest.StatusCode == 200) {
						MapBriefDocument = Xml.Create(MapBriefListRequest.Result);
					}
					else {
					
					}
					
					Http.Destroy(MapBriefListRequest);
					MapBriefListRequest = Null;
				}
			}
		}
		
		
		
		Void LoadCustomCars() {
			declare persistent Text[] NEM_CustomCars for LocalUser;
			
			if(NEM_CustomCars.count == 0) {
				for(i,0,4) {
					NEM_CustomCars.add("");
				}
			}
			
			declare Frame <=> ((Page.GetFirstChild("FrameCustomCars") as CMlFrame).GetFirstChild("FrameList") as CMlFrame);
		
			for(i,0,4) {
				(Frame.Controls[i*2 + 1] as CMlEntry).SetText(NEM_CustomCars[i],False);
			}
		}
	
		Void OnInit() {
			
		}
		
		Void OnStart() {
			SoundHover = Audio.CreateSound("file://Media/Sounds/Hover.ogg");
			SoundClick = Audio.CreateSound("file://Media/Sounds/Click.ogg");
			SoundElectric = Audio.CreateSound("file://Media/Sounds/Electric.ogg");
			
			if(SystemSkuIdentifier == CMlScript::ESystemSkuIdentifier::EU) Page.GetFirstChild("FrameOpenplanet").Hide();
			
			Environment = "Canyon";
			
			Maps.add("");
			
			for(i,1,15) {
				declare Number = "";
				if(i < 10) Number = "0"^i;
				else Number = i^"";
			
				Maps.add("");
				Maps[i] = "A"^Number;
			}
			
			TrackOfTheDayRequest = Http.CreateGet("http://trackmania.bigbang1112.eu/nadeoenvimix/api/track_day.php");
		
			MapBriefListRequest = Http.CreateGet("http://trackmania.bigbang1112.eu/nadeoenvimix/api/map_list_brief.php");
		
			StartTime = Now;
			Page.GetFirstChild("menu").DataAttributeSet("time",StartTime^"");
		}
		
		Void OnLoop() {
			(Page.GetFirstChild("labelEnvironment") as CMlLabel).SetText(Environment);			
			
			foreach(Map,((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("maps") as CMlFrame).Controls) {
				declare Time = TextLib::ToInteger(Map.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(Map.DataAttributeGet("hover") == "true") {
					((Map as CMlFrame).GetFirstChild("hover") as CMlQuad).Opacity = Value * .25;
				}
				else {
					((Map as CMlFrame).GetFirstChild("hover") as CMlQuad).Opacity = .25 - Value * .25;
				}
			}
		
			declare Diff = GetDifficulty();
			
			if(Diff != LastDifficulty) {
				DifficultySwitchTime = Now;
				
				Audio.PlaySoundEvent(SoundHover, 1.0);
				
				Page.GetFirstChild("Lock").Hide();
				SelectEnvironment = "";
				SelectDifficulty = 0;
				SelectMap = 0;
						
				foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
					(Tile as CMlFrame).DataAttributeSet("hover","false");
					
					(Tile as CMlFrame).GetFirstChild("select").Hide();
				}
				
				declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
					
				(Panel.GetFirstChild("Name") as CMlLabel).SetText("...");
				(Panel.GetFirstChild("Validator") as CMlLabel).SetText("...");
						
				(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(0.0);
				(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(0.0);
				
				if(Diff == 0) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <1.0,1.0,1.0>;
				if(Diff == 1) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <0.0,1.0,0.0>;
				if(Diff == 2) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <0.0,0.0,1.0>;
				if(Diff == 3) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <1.0,0.0,0.0>;
				if(Diff == 4) ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("difficultyBar") as CMlQuad).BgColor = <0.0,0.0,0.0>;
				
				for(i,1,15) {
					declare Number = "";
					if(i < 10) Number = "0"^i;
					else Number = i^"";
					
					switch(Diff) {
						case 0: { Maps[i] = "A"^Number; }
						case 1: { Maps[i] = "B"^Number; }
						case 2: { Maps[i] = "C"^Number; }
						case 3: { Maps[i] = "D"^Number; }
						case 4: { Maps[i] = "E"^Number; }
					}
				}
			}
			
			LastDifficulty = GetDifficulty();
			
			AnimateMaps(DifficultySwitchTime);
			
			HandleRequests();
			
			declare Slider = (Page.GetFirstChild("slider") as CMlFrame);
			
			if(!MouseLeftButton) {
				Slider.DataAttributeSet("hold","false");
			}
			
			if(Slider.DataAttributeGet("hold") == "true") {
				Slider.GetFirstChild("button").RelativePosition_V3.Y = MathLib::Clamp(TextLib::ToReal(Slider.DataAttributeGet("pos")) + MouseY - TextLib::ToReal(Slider.DataAttributeGet("mouse_y")),-88.0,0.0);
			}
		
			if(Page.GetFirstChild("menu").DataAttributeGet("state") == "hidden") {
				HideMenu(TextLib::ToInteger(Page.GetFirstChild("menu").DataAttributeGet("time")),Page.GetFirstChild("menu").DataAttributeGet("action"));
			}
			else {
				ShowMenu(TextLib::ToInteger(Page.GetFirstChild("menu").DataAttributeGet("time")));
			}
		
			foreach(Button,(Page.GetFirstChild("buttons") as CMlFrame).Controls) {
				declare B <=> (Button as CMlFrame);
				
				declare Time = TextLib::ToInteger(B.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(B.DataAttributeGet("hover") == "true") {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <Value,Value,Value>;
					(B.GetFirstChild("text") as CMlLabel).TextColor = <1.0-Value,1.0-Value,1.0-Value>;
				}
				else {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <1.0-Value,1.0-Value,1.0-Value>;
					(B.GetFirstChild("text") as CMlLabel).TextColor = <Value,Value,Value>;
				}
				
				if(B.ControlId == "buttonTrack") {
					declare ValueTrack = AnimLib::EaseInOutSine(Now - Time, 0.0, 1.0, 500);
				
					if(B.DataAttributeGet("hover") == "true") {
						(B.GetFirstChild("track") as CMlFrame).RelativeScale = ValueTrack * 0.05 + 1;
						((B.GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).Opacity = ValueTrack;
					}
					else {
						(B.GetFirstChild("track") as CMlFrame).RelativeScale = 1.05 - ValueTrack * 0.05;
						((B.GetFirstChild("track") as CMlFrame).GetFirstChild("name") as CMlLabel).Opacity = 1.0 - ValueTrack;
					}
				}
			}
			
			foreach(Button,(Page.GetFirstChild("buttonsSelection") as CMlFrame).Controls) {
				declare B <=> (Button as CMlFrame);
				
				declare Time = TextLib::ToInteger(B.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(B.DataAttributeGet("hover") == "true") {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <Value,Value,Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <1.0-Value,1.0-Value,1.0-Value>;
				}
				else {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <1.0-Value,1.0-Value,1.0-Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <Value,Value,Value>;
				}
			}
			
			foreach(Button,(Page.GetFirstChild("buttonsCustomCars") as CMlFrame).Controls) {
				declare B <=> (Button as CMlFrame);
				
				declare Time = TextLib::ToInteger(B.DataAttributeGet("hover_time"));
				declare Value = AnimLib::EaseOutCubic(Now - Time, 0.0, 1.0, 200);
				
				if(B.DataAttributeGet("hover") == "true") {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <Value,Value,Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <1.0-Value,1.0-Value,1.0-Value>;
				}
				else {
					(B.GetFirstChild("button") as CMlQuad).BgColor = <1.0-Value,1.0-Value,1.0-Value>;
					if(B.GetFirstChild("text") != Null)
						(B.GetFirstChild("text") as CMlLabel).TextColor = <Value,Value,Value>;
				}
			}
			
			declare Button = ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("slider") as CMlFrame);
			declare V = AnimLib::EaseOutCubic(Now - TextLib::ToInteger(Button.DataAttributeGet("hover_time")), 0.0, 1.0, 100) * 0.5 + 0.25;
			
			if(Button.DataAttributeGet("hover") == "true") {
				(Button.GetFirstChild("button") as CMlQuad).BgColor = <V,V,V>;
			}
			else {
				(Button.GetFirstChild("button") as CMlQuad).BgColor = <1.0-V,1.0-V,1.0-V>;
			}
		}
	
		Void OnEvent(CMlEvent _Event) {
			declare E <=> _Event;
			
			switch(E.Type) {
				case CMlEvent::Type::MouseOver: {
					declare Frame <=> E.Control.Parent;
					
					if(E.ControlId == "button") {
						Audio.PlaySoundEvent(SoundHover, 1.0);
						Frame.DataAttributeSet("hover","true");
						Frame.DataAttributeSet("hover_time",Now^"");
						Frame.DataAttributeSet("hover_in_value",(E.Control as CMlQuad).BgColor[0]^"");
					}
					
					if(Frame.Parent.ControlId == "maps") {
						if(SelectEnvironment == "") {
							Audio.PlaySoundEvent(SoundHover, 1.0);
							Frame.DataAttributeSet("hover","true");
							Frame.DataAttributeSet("hover_time",Now^"");
							
							declare Text Diff = "";
								
							switch(GetDifficulty()) {
								case 0: { Diff = "A"; }
								case 1: { Diff = "B"; }
								case 2: { Diff = "C"; }
								case 3: { Diff = "D"; }
								case 4: { Diff = "E"; }
							}
							
							declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
							
							(Panel.GetFirstChild("Name") as CMlLabel).SetText(Diff ^ E.Control.Parent.ControlId);
							
							if(MapBriefDocument != Null) {
								(Panel.GetFirstChild("Validator") as CMlLabel).SetText(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("CanyonCar").GetAttributeText("Validator","..."));
								
								(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("CanyonCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("StadiumCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("ValleyCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("LagoonCar").GetAttributeReal("Difficulty",0.0));
								(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("CanyonCar").GetAttributeReal("Quality",0.0));
								(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("StadiumCar").GetAttributeReal("Quality",0.0));
								(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("ValleyCar").GetAttributeReal("Quality",0.0));
								(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(MapBriefDocument.Root.GetFirstChild(Environment).GetFirstChild(Diff ^ E.Control.Parent.ControlId).GetFirstChild("LagoonCar").GetAttributeReal("Quality",0.0));
							}
						}
					}
				}
				case CMlEvent::Type::MouseOut: {
					declare Frame <=> E.Control.Parent;
					
					if(E.ControlId == "button") {
						Frame.DataAttributeSet("hover","false");
						Frame.DataAttributeSet("hover_time",Now^"");
						Frame.DataAttributeSet("hover_out_value",(E.Control as CMlQuad).BgColor[0]^"");
					}
					if(SelectEnvironment == "") {
					if(E.Control.Parent.Parent.ControlId == "maps") {
						Audio.PlaySoundEvent(SoundHover, 1.0);
						Frame.DataAttributeSet("hover","false");
						Frame.DataAttributeSet("hover_time",Now^"");
					}
					
					if(Frame.Parent.ControlId == "maps") {
						declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
					
						(Panel.GetFirstChild("Name") as CMlLabel).SetText("...");
						(Panel.GetFirstChild("Validator") as CMlLabel).SetText("...");
						
						(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(0.0);
						}
					}
				}
				case CMlEvent::Type::MouseClick: {
					if(E.ControlId == "Lock") {
						Page.GetFirstChild("Lock").Hide();
						
						SelectEnvironment = "";
						SelectDifficulty = 0;
						SelectMap = 0;
						
						foreach(Tile,(Page.GetFirstChild("maps") as CMlFrame).Controls) {
							(Tile as CMlFrame).DataAttributeSet("hover","false");
							(Tile as CMlFrame).DataAttributeSet("hover_time",Now^"");
							
							(Tile as CMlFrame).GetFirstChild("select").Hide();
						}
						
						declare Panel <=> ((Page.GetFirstChild("selection") as CMlFrame).GetFirstChild("Panel") as CMlFrame);
					
						(Panel.GetFirstChild("Name") as CMlLabel).SetText("...");
						(Panel.GetFirstChild("Validator") as CMlLabel).SetText("...");
						
						(Panel.GetFirstChild("DifficultyCanyonCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("DifficultyStadiumCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("DifficultyValleyCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("DifficultyLagoonCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityCanyonCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityStadiumCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityValleyCar") as CMlGauge).SetRatio(0.0);
						(Panel.GetFirstChild("QualityLagoonCar") as CMlGauge).SetRatio(0.0);
					}
					if(E.ControlId == "hover") {
						Audio.PlaySoundEvent(SoundClick, 1.0);
						if(!Page.GetFirstChild("Lock").Visible)
						if(E.Control.Parent.Parent.ControlId == "maps") {
							declare Text Diff = "";
							
							switch(GetDifficulty()) {
								case 0: { Diff = "A"; }
								case 1: { Diff = "B"; }
								case 2: { Diff = "C"; }
								case 3: { Diff = "D"; }
								case 4: { Diff = "E"; }
							}
							
							foreach(Tile,E.Control.Parent.Parent.Controls) {
								if(Tile != E.Control.Parent)
									(Tile as CMlFrame).GetFirstChild("select").Hide();
							}
							
							if(E.Control.Parent.GetFirstChild("select").Visible) {
								E.Control.Parent.GetFirstChild("select").Hide();
								
								Page.GetFirstChild("Lock").Hide();
								
								SelectEnvironment = "";
								SelectDifficulty = 0;
								SelectMap = 0;
							}
							else {
								E.Control.Parent.GetFirstChild("select").Show();
								
								Page.GetFirstChild("Lock").Show();
								
								SelectEnvironment = Environment;
								SelectDifficulty = GetDifficulty();
								SelectMap = TextLib::ToInteger(E.Control.Parent.ControlId);
							}
							
							//SendCustomEvent("COMMAND_PLAYMAP", [Environment, ""^GetDifficulty(), E.Control.Parent.ControlId,"Any"]);
						}
					}
					if(E.Control.Parent.Parent.ControlId == "buttons") {
						if(E.Control.Parent.ControlId == "buttonPlay") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Audio.PlaySoundEvent(SoundElectric, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","hidden");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","");
				
							(Page.GetFirstChild("menu") as CMlFrame).GetFirstChild("block").Show();
							Page.GetFirstChild("selection").Show();
						}
						if(E.Control.Parent.ControlId == "buttonProfile") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Audio.PlaySoundEvent(SoundElectric, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","hidden");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","menu_profile");
						}
						if(E.Control.Parent.ControlId == "buttonExit") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Audio.PlaySoundEvent(SoundElectric, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","hidden");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","quit");
						}
						if(E.Control.Parent.ControlId == "buttonTrack") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							
							//SendCustomEvent("COMMAND_PLAYMAP", [TrackDayEnvironment, TrackDayDifficulty, TrackDayMap,"Any"]);
						}
					}
					if(E.Control.Parent.Parent.ControlId == "buttonsSelection") {
						if(E.Control.Parent.ControlId == "buttonPlay") {
							SendCustomEvent("COMMAND_PLAYMAP", [SelectEnvironment, ""^SelectDifficulty, ""^SelectMap,"Any"]);
						}
						if(E.Control.Parent.ControlId == "buttonBack") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							
							Page.GetFirstChild("menu").DataAttributeSet("state","shown");
							Page.GetFirstChild("menu").DataAttributeSet("time",Now^"");
							Page.GetFirstChild("menu").DataAttributeSet("action","");
							
							(Page.GetFirstChild("menu") as CMlFrame).GetFirstChild("block").Hide();
							Page.GetFirstChild("selection").Hide();
						}
						
						if(E.Control.Parent.ControlId == "buttonCanyon") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Canyon";
						}
						if(E.Control.Parent.ControlId == "buttonStadium") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Stadium";
						}
						if(E.Control.Parent.ControlId == "buttonValley") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Valley";
						}
						if(E.Control.Parent.ControlId == "buttonLagoon") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Environment = "Lagoon";
						}
						if(E.Control.Parent.ControlId == "buttonPlayOnline") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							SendCustomEvent("PLAY_POUTREL_SERVER", Text[]);
						}
						if(E.Control.Parent.ControlId == "buttonCustomCars") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Page.GetFirstChild("selection").Hide();
							Page.GetFirstChild("FrameCustomCars").Show();
							LoadCustomCars();
						}
					}
					if(E.Control.Parent.Parent.ControlId == "buttonsCustomCars") {
						if(E.Control.Parent.ControlId == "buttonBack") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							Page.GetFirstChild("selection").Show();
							Page.GetFirstChild("FrameCustomCars").Hide();
						}
						if(E.Control.Parent.ControlId == "buttonCreate") {
							Audio.PlaySoundEvent(SoundClick, 1.0);
							SendCustomEvent("OPEN_ITEMEDITOR", Text[]);
						}
					}
					
					if(E.Control.Parent.ControlId == "slider") {
						Audio.PlaySoundEvent(SoundClick, 1.0);
					
						if(E.ControlId == "QuadBack") {
							E.Control.Parent.GetFirstChild("button").RelativePosition_V3.Y = MathLib::Clamp(MouseY-40,-88.0,0.0);
						}
						else {
							E.Control.Parent.DataAttributeSet("hold","true");
							E.Control.Parent.DataAttributeSet("mouse_y",MouseY^"");
							E.Control.Parent.DataAttributeSet("pos",E.Control.RelativePosition_V3.Y^"");
						}
					}
				}
				case CMlEvent::Type::EntrySubmit: {
					declare persistent Text[] NEM_CustomCars for LocalUser;
							
					if(E.ControlId == "EntryCar1") NEM_CustomCars[0] = (Page.GetFirstChild("EntryCar1") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar2") NEM_CustomCars[1] = (Page.GetFirstChild("EntryCar2") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar3") NEM_CustomCars[2] = (Page.GetFirstChild("EntryCar3") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar4") NEM_CustomCars[3] = (Page.GetFirstChild("EntryCar4") as CMlEntry).Value;
					else if(E.ControlId == "EntryCar5") NEM_CustomCars[4] = (Page.GetFirstChild("EntryCar5") as CMlEntry).Value;
				}
			}
		}
		
		main() {		
			OnInit();
			OnStart();
		
			while(True) {
				OnLoop();
			
				foreach(Event,PendingEvents) {
					OnEvent(Event);
				}
			
				yield;
			}
		}
	-->
	</script>
</manialink>